<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>docker操作文档 | 光明</title><meta name="author" content="ADAN"><meta name="copyright" content="ADAN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="docker安装1.卸载（可选）如果之前安装过旧版本的Docker，可以使用下面命令卸载： yum remove docker \                  docker-client \                  docker-client-latest \                  docker-common \                  docker-late">
<meta property="og:type" content="article">
<meta property="og:title" content="docker操作文档">
<meta property="og:url" content="https://adanpro.gitee.io/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/index.html">
<meta property="og:site_name" content="光明">
<meta property="og:description" content="docker安装1.卸载（可选）如果之前安装过旧版本的Docker，可以使用下面命令卸载： yum remove docker \                  docker-client \                  docker-client-latest \                  docker-common \                  docker-late">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://adanpro.gitee.io/adanblog/img/2.jpg">
<meta property="article:published_time" content="2023-06-27T17:09:00.606Z">
<meta property="article:modified_time" content="2023-06-27T17:27:53.227Z">
<meta property="article:author" content="ADAN">
<meta property="article:tag" content="dokcer">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://adanpro.gitee.io/adanblog/img/2.jpg"><link rel="shortcut icon" href="/adanblog/img/favicon.svg"><link rel="canonical" href="https://adanpro.gitee.io/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/adanblog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/adanblog/',
  algolia: undefined,
  localSearch: {"path":"/adanblog/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'docker操作文档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-28 01:27:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/mycss.css"><link rel="stylesheet" href="/js/custom.js"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/king.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/adanblog/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/adanblog/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/adanblog/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/adanblog/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/adanblog/about/"><i class="fa-fw fa fa-sitemap"></i><span> 关于</span></a></li><li><a class="site-page child" href="/adanblog/myself/"><i class="fa-fw fa fa-id-card"></i><span> myself</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/adanblog/img/2.jpg')"><nav id="nav"><span id="blog-info"><a href="/adanblog/" title="光明"><span class="site-name">光明</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/adanblog/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/adanblog/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/adanblog/about/"><i class="fa-fw fa fa-sitemap"></i><span> 关于</span></a></li><li><a class="site-page child" href="/adanblog/myself/"><i class="fa-fw fa fa-id-card"></i><span> myself</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">docker操作文档</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-27T17:09:00.606Z" title="发表于 2023-06-28 01:09:00">2023-06-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-27T17:27:53.227Z" title="更新于 2023-06-28 01:27:53">2023-06-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/adanblog/categories/docker/">docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="docker操作文档"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a><strong>docker安装</strong></h1><h2 id="1-卸载（可选）"><a href="#1-卸载（可选）" class="headerlink" title="1.卸载（可选）"></a>1.卸载（可选）</h2><p>如果之前安装过旧版本的Docker，可以使用下面命令卸载：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">yum</span> <span class="string">remove docker \</span></span><br><span class="line"><span class="string">                  docker-client \</span></span><br><span class="line"><span class="string">                  docker-client-latest \</span></span><br><span class="line"><span class="string">                  docker-common \</span></span><br><span class="line"><span class="string">                  docker-latest \</span></span><br><span class="line"><span class="string">                  docker-latest-logrotate \</span></span><br><span class="line"><span class="string">                  docker-logrotate \</span></span><br><span class="line"><span class="string">                  docker-selinux \</span></span><br><span class="line"><span class="string">                  docker-engine-selinux \</span></span><br><span class="line"><span class="string">                  docker-engine \</span></span><br><span class="line"><span class="string">                  docker-ce</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-安装docker"><a href="#2-安装docker" class="headerlink" title="2.安装docker"></a>2.安装docker</h2><p>首先需要大家虚拟机联网，安装yum工具</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y yum-utils \</span><br><span class="line">           device-mapper-persistent-data \</span><br><span class="line">           lvm2 --skip-broken</span><br></pre></td></tr></table></figure>

<p>然后更新本地镜像源：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置docker镜像源</span></span><br><span class="line"><span class="attr">yum-config-manager</span> <span class="string">\</span></span><br><span class="line"><span class="string">    --add-repo \</span></span><br><span class="line"><span class="string">    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">sed</span> <span class="string">-i &#x27;s/download.docker.com/mirrors.aliyun.com\/docker-ce/g&#x27; /etc/yum.repos.d/docker-ce.repo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">yum</span> <span class="string">makecache fast</span></span><br></pre></td></tr></table></figure>

<p>然后输入命令：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y docker-ce</span><br></pre></td></tr></table></figure>

<p>docker-ce为社区免费版本。稍等片刻，docker即可安装成功。</p>
<h2 id="3-启动docker"><a href="#3-启动docker" class="headerlink" title="3.启动docker"></a>3.启动docker</h2><p>Docker应用需要用到各种端口，逐一去修改防火墙设置。非常麻烦，因此建议大家直接关闭防火墙！</p>
<p>启动docker前，<strong>一定要关闭防火墙</strong>后！！</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 关闭</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment"># 禁止开机启动防火墙</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#查看是否关闭防火墙</span></span><br><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure>

<p>通过命令启动docker：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start docker  <span class="comment">## 1.4.启动docker服务</span></span><br><span class="line"> </span><br><span class="line">systemctl stop docker  <span class="comment">## 1.4.停止docker服务</span></span><br><span class="line"> </span><br><span class="line">systemctl restart docker  <span class="comment">## 1.4.重启docker服务</span></span><br></pre></td></tr></table></figure>

<p>查看docker版本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure>

<h2 id="4-配置镜像加速"><a href="#4-配置镜像加速" class="headerlink" title="4.配置镜像加速"></a>4.配置镜像加速</h2><p>docker官方镜像仓库网速较差，我们需要设置国内镜像服务：</p>
<p>参考阿里云的镜像加速文档：<a target="_blank" rel="noopener" href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p>
<p><strong>创建文件夹</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /etc/docker</span><br></pre></td></tr></table></figure>

<p><strong>在文件夹内新建一个daemon.json文件</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo <span class="built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://akchsmlh.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><strong>重新加载文件</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br></pre></td></tr></table></figure>

<p><strong>重启docker</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>可以看见，多了个&#x2F;etc&#x2F;docker&#x2F;daemon.json文件：</p>
<h2 id="5-设置开机启动docker"><a href="#5-设置开机启动docker" class="headerlink" title="5 设置开机启动docker"></a>5 设置开机启动docker</h2><p>1、查看已经启动的服务</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">list-units --type=service</span></span><br></pre></td></tr></table></figure>

<p>2、查看是否设置开机启动</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">list-unit-files | grep docker</span></span><br></pre></td></tr></table></figure>

<p>3、设置开机启动</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">systemctl</span> <span class="string">enable docker.service</span></span><br></pre></td></tr></table></figure>

<p>4、启动时加–restart&#x3D;always</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">--restart</span>=<span class="string">always</span></span><br></pre></td></tr></table></figure>

<p>设置容器自启</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">update --restart=always 容器名称</span></span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">update --restart=always mysql nginx</span></span><br></pre></td></tr></table></figure>

<p>如果已经启动的项目，则使用update更新：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">update --restart=always nginx</span></span><br></pre></td></tr></table></figure>



<h1 id="Docker-配置Elasticsearch"><a href="#Docker-配置Elasticsearch" class="headerlink" title="Docker 配置Elasticsearch"></a>Docker 配置Elasticsearch</h1><p>Elasticsearch 可以通过命令行参数或者通过 Docker 卷来挂载配置、日志、数据和插件文件。以下是通过 Docker 卷挂载这些文件的步骤：</p>
<ol>
<li><p>首先创建一个目录来存储 Elasticsearch 的配置、日志、数据和插件文件，比如 <code>/opt/elasticsearch/data</code>。</p>
</li>
<li><p>将 Elasticsearch 的配置文件复制到该目录，如：<code>/opt/elasticsearch/data/elasticsearch.yml</code>。</p>
</li>
<li><p>创建一个子目录，用于存储 Elasticsearch 的日志文件，如：<code>/opt/elasticsearch/data/logs</code>。</p>
</li>
<li><p>创建另一个子目录，用于存储 Elasticsearch 的数据文件，如：<code>/opt/elasticsearch/data/data</code>。</p>
</li>
<li><p>创建另一个子目录，用于存储 Elasticsearch 的插件文件，如：<code>/opt/elasticsearch/data/plugins</code>。</p>
</li>
<li><p>运行以下命令来启动 Elasticsearch 容器，并将数据、日志、配置和插件目录都挂载到容器中：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --name es \</span><br><span class="line"> -p 9200:9200 \</span><br><span class="line"> -p 9300:9300 \</span><br><span class="line"> -e <span class="string">&quot;discovery.type=single-node&quot;</span> \</span><br><span class="line"> -e ES_JAVA_OPTS=<span class="string">&quot;-Xms256m -Xmx256m&quot;</span> \</span><br><span class="line"> -v /docker/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \</span><br><span class="line"> -v /docker/elasticsearch/data/:/usr/share/elasticsearch/data \</span><br><span class="line"> -v /docker/elasticsearch/plugins:/usr/share/elasticsearch/plugins \</span><br><span class="line"> --privileged \</span><br><span class="line"> --network es-net \</span><br><span class="line"> -d elasticsearch:7.12.1</span><br></pre></td></tr></table></figure>

<ul>
<li>-e “cluster.name&#x3D;es-docker-cluster”：设置集群名称</li>
<li>-e “http.host&#x3D;0.0.0.0”：监听的地址，可以外网访问</li>
<li>-e “ES_JAVA_OPTS&#x3D;-Xms512m -Xmx512m”：内存大小</li>
<li>-e “discovery.type&#x3D;single-node”：非集群模式</li>
<li>-v &#x2F;mydata&#x2F;elasticsearch&#x2F;data&#x2F;:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;data：挂载逻辑卷，绑定es的数据目录</li>
<li>-v &#x2F;mydata&#x2F;elasticsearch&#x2F;logs&#x2F;:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;logs：挂载逻辑卷，绑定es的日志目录</li>
<li>-v &#x2F;mydata&#x2F;elasticsearch&#x2F;plugins:&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;plugins：挂载逻辑卷，绑定es的插件目录</li>
<li>–privileged：授予逻辑卷访问权</li>
<li>–network es-net ：加入一个名为es-net的网络中</li>
<li>-p 9200:9200：端口映射配置，这里是9200是暴露的http协议端口，用于用户访问</li>
<li>-p 9300:9300：es各个容器之间互联的端口，暂时用不到，不暴露也行，</li>
</ul>
</li>
<li><p>运行命令 <code>docker ps</code> 来确认 Elasticsearch 容器已经启动。</p>
</li>
</ol>
<p>​	docker以挂载配置文件启动elasticsearch的时候会报如下错误：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-1.png" alt="img"></p>
<p>看错误我们会以为是es容器里的&#x2F;usr&#x2F;share&#x2F;elasticsearch&#x2F;data&#x2F;nodes文件夹目录没有读写权限，其实给提示误导了，实际是挂载的目录没有读写权限。比如我们宿主主机的配置目录为:&#x2F;usr&#x2F;local&#x2F;es&#x2F;data，那么我们需要赋予它读写权限：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">chmod</span> <span class="string">777 /usr/local/es/data</span></span><br></pre></td></tr></table></figure>

<p>重新启动，问题不再存在。</p>
<h1 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h1><p>Kibana 可以使用命令行参数或者通过 Docker 卷来挂载配置文件。以下是通过 Docker 卷挂载配置文件的步骤：</p>
<ol>
<li><p>首先创建一个配置文件目录，如：<code>/docker/kibana/config</code>。</p>
</li>
<li><p>将 Kibana 的配置文件复制到该目录中，如：<code>/docker/kibana/config/kibana.yml</code>。</p>
</li>
<li><p>使用以下命令来运行 Kibana，同时将配置文件目录挂载到容器中：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run -d \</span></span><br><span class="line"><span class="string">--name kibana \</span></span><br><span class="line"><span class="string">-e ELASTICSEARCH_HOSTS=http://es:9200 \</span></span><br><span class="line"><span class="string">--network=es-net \</span></span><br><span class="line"><span class="string">-p 5601:5601  \</span></span><br><span class="line"><span class="string">kibana:7.12.1</span></span><br></pre></td></tr></table></figure>

<p>上述命令会将本地目录 <code>/opt/kibana/config</code> 挂载到容器内的 <code>/usr/share/kibana/config</code>，以便 Kibana 能够访问该目录下的配置文件。</p>
<ul>
<li>–network es-net ：加入一个名为es-net的网络中，与elasticsearch在同一个网络中</li>
<li>-e ELASTICSEARCH_HOSTS&#x3D;<a target="_blank" rel="noopener" href="http://es:9200"：设置elasticsearch的地址，因为kibana已经与elasticsearch在一个网络，因此可以用容器名直接访问elasticsearch">http://es:9200&quot;：设置elasticsearch的地址，因为kibana已经与elasticsearch在一个网络，因此可以用容器名直接访问elasticsearch</a></li>
<li>-p 5601:5601：端口映射配置</li>
<li>运行命令 <code>docker ps</code> 来确认 Kibana 容器已经启动。</li>
<li>访问 <code>http://localhost:5601</code> 来验证 Kibana 是否能够正常访问并加载配置文件。</li>
</ul>
</li>
</ol>
<h2 id="Kibana中文配置"><a href="#Kibana中文配置" class="headerlink" title="Kibana中文配置"></a>Kibana中文配置</h2><p>我们发现<code>Kibana</code>是英文面板，看起来不是很方便，但<code>Kibana</code>是支持中文配置，所以我们可以把<code>Kibana</code>配置成中文版，便于我们操作。</p>
<p>切换中文操作如下:</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">properties复制代码#进入容器</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">exec -it kibana /bin/bash</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#进入配置文件目录</span></span><br><span class="line"><span class="attr">cd</span> <span class="string">/usr/share/kibana/config</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#编辑文件kibana.yml</span></span><br><span class="line"><span class="attr">vi</span> <span class="string">kibana.yml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#在最后一行添加如下配置</span></span><br><span class="line"><span class="attr">i18n.locale</span>: <span class="string">zh-CN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#保存退出</span></span><br><span class="line"><span class="attr">exit</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#并重启容器</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">restart kibana</span></span><br></pre></td></tr></table></figure>

<h2 id="IK分词器安装"><a href="#IK分词器安装" class="headerlink" title="IK分词器安装"></a>IK分词器安装</h2><p>我们打开<code>Kibana</code>，点击开发工具，操作如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-2.png" alt="img"></p>
<p>输入如下操作，用于查询分词：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-3.png" alt="img"></p>
<p>上图测试代码如下:</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">properties复制代码GET</span> <span class="string">/_analyze</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;standard&quot;,</span></span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;IT门徒，带你打开通往梦想的门！&quot;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<p>表示使用<code>standard</code>对<code>IT门徒，带你打开通往梦想的门！</code>进行分词。</p>
<p><code>分词</code>：提取一句话或者一篇文章中的词语。</p>
<p>我们在使用<code>ElasticSearch</code>的时候，默认用<code>standard</code>分词器，但<code>standard</code>分词器使用的是按空格分词，这种分词操作方法不符合中文分词标准，我们需要额外安装中文分词器。</p>
<p> </p>
<h3 id="IK分词器介绍"><a href="#IK分词器介绍" class="headerlink" title="IK分词器介绍"></a>IK分词器介绍</h3><p><code>IK Analyzer</code>是一个开源的，基于java语言开发的轻量级的中文分词工具包。从2006年12月推出1.0版开始， <code>IKAnalyzer</code>已经推出了多个大版本。最初，它是以开源项目<code>Luence</code>为应用主体的，结合词典分词和文法分析算法的中文分词组件。<code>IK Analyzer</code>则发展为面向<code>Java</code>的公用分词组件，独立于<code>Lucen</code>e项目，同时提供了对<code>Lucene</code>的默认优化实现。</p>
<h3 id="IK分词器下载"><a href="#IK分词器下载" class="headerlink" title="IK分词器下载"></a>IK分词器下载</h3><h3 id="下载方式一"><a href="#下载方式一" class="headerlink" title="下载方式一"></a><strong>下载方式一</strong></h3><p><strong>离线安装ik插件（推荐）</strong></p>
<p><code>ElasticSearch</code>内核其实就是基于<code>Lucene</code>，所以我们可以直接在<code>ElasticSearch</code>中集成IK分词器，<code>IK</code>分词器集成<code>ElasticSearch</code>下载地址：<a target="_blank" rel="noopener" href="https://github.com/medcl/elasticsearch-analysis-ik/pic/1687790038060-4.png)">https://github.com/medcl/elasticsearch-analysis-ik/releases![img](./../pic/1687790038060-4.png)</a></p>
<p><strong>查看数据卷目录(已经挂载指定数据卷无需查看)</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">volume inspect es</span></span><br></pre></td></tr></table></figure>

<p>显示结果： </p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">[</span></span><br><span class="line">    <span class="attr">&#123;</span></span><br><span class="line">        <span class="attr">&quot;CreatedAt&quot;</span>: <span class="string">&quot;2022-05-06T10:06:34+08:00&quot;,</span></span><br><span class="line">        <span class="attr">&quot;Driver&quot;</span>: <span class="string">&quot;local&quot;,</span></span><br><span class="line">        <span class="attr">&quot;Labels&quot;</span>: <span class="string">null,</span></span><br><span class="line">        <span class="attr">&quot;Mountpoint&quot;</span>: <span class="string">&quot;/var/lib/docker/volumes/es-plugins/_data&quot;,</span></span><br><span class="line">        <span class="attr">&quot;Name&quot;</span>: <span class="string">&quot;es-plugins&quot;,</span></span><br><span class="line">        <span class="attr">&quot;Options&quot;</span>: <span class="string">null,</span></span><br><span class="line">        <span class="attr">&quot;Scope&quot;</span>: <span class="string">&quot;local&quot;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">]</span></span><br></pre></td></tr></table></figure>

<p>说明plugins目录被挂载到了：<code>/var/lib/docker/volumes/es-plugins/_data</code>这个目录中。</p>
<p>2）解压缩分词器安装包</p>
<p>下面我们需要把课前资料中的ik分词器解压缩，重命名为ik</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-5.png" alt="img"></p>
<p>3）上传到es容器的插件数据卷中</p>
<p>也就是&#x2F;var&#x2F;lib&#x2F;docker&#x2F;volumes&#x2F;es-plugins&#x2F;_data：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-6.png" alt="img"></p>
<p>4）重启容器</p>
<p><strong>已经挂载指定数据卷</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-7.png" alt="img"></p>
<p>进入挂载目录，上传ik分词器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-8.png" alt="img"></p>
<p><strong>重启es服务</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">restart es</span></span><br></pre></td></tr></table></figure>

<p><strong>查看es日志</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">logs -f es</span></span><br></pre></td></tr></table></figure>



<h3 id="下载方式二"><a href="#下载方式二" class="headerlink" title="下载方式二"></a><strong>下载方式二</strong></h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 在线下载并安装</span></span><br><span class="line"><span class="attr">./bin/elasticsearch-plugin</span>  <span class="string">install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.12.1/elasticsearch-analysis-ik-7.12.1.zip</span></span><br></pre></td></tr></table></figure>

<h3 id="下载方式三"><a href="#下载方式三" class="headerlink" title="下载方式三"></a><strong>下载方式三</strong></h3><p>下载安装包<code>elasticsearch-analysis-ik-7.12.1.zip</code>后，并解压，目录如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-9.png" alt="img"></p>
<p>我们只需要将上面<code>elasticsearch-analysis-ik-7.12.1</code>拷贝到<code>ElasticSearch</code>的<code>plugins</code>目录中即可，但由于当前服务采用的是<code>docker</code>安装，所以需要将文件拷贝到<code>docker</code>容器的<code>plugins</code>目录才行。</p>
<p>操作如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">properties复制代码#为了方便配置，我们将elasticsearch-analysis-ik-7.12.1改成ik文件夹</span></span><br><span class="line"><span class="attr">mv</span> <span class="string">elasticsearch-analysis-ik-7.12.1 ik</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#将ik文件夹拷贝到elasticsearch容器中</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">cp ik elasticsearch:/usr/share/elasticsearch/plugins</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#重启容器</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">restart elasticsearch</span></span><br></pre></td></tr></table></figure>

<p>操作效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-11.png" alt="img"></p>
<p> </p>
<h3 id="分词测试"><a href="#分词测试" class="headerlink" title="分词测试"></a>分词测试</h3><p><code>IK</code>分词器包含两种模式：</p>
<ul>
<li><code>ik_smart</code>：最少切分</li>
<li><code>ik_max_word</code>：最细切分</li>
</ul>
<p> </p>
<p>前面使用默认的<code>standard</code>分词器，对中文分词非常难用，安装IK分词器后，我们可以使用IK分词器测试，测试代码如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">GET</span> <span class="string">/_analyze</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_max_word&quot;,</span></span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;IT门徒，带你打开通往梦想的门！&quot;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<p>测试效果如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038060-10.png" alt="img"></p>
<p>我们可以发现对中文的分词效果是比较不错的，但也存在一些不足，比如<code>梦想的门</code>我们希望它是一个词，而<code>带你</code>我们希望它不被识别一个词，又该如何实现呢？</p>
<p> </p>
<h3 id="IK扩展词词典"><a href="#IK扩展词词典" class="headerlink" title="IK扩展词词典"></a>IK扩展词词典</h3><p>IK分词器支持自定义词典，包括自定义分词，也包含自定义停用分词，操作起来也非常简单。我们接下来实现一下自定义词典和停用词典。</p>
<p> 1）打开IK分词器config目录：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/16877900380620.png" alt="img"></p>
<p>2）在IKAnalyzer.cfg.xml配置文件内容添加：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">&lt;?xml</span> <span class="string">version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="attr">&lt;!DOCTYPE</span> <span class="string">properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="attr">&lt;properties&gt;</span></span><br><span class="line">        <span class="attr">&lt;comment&gt;IK</span> <span class="string">Analyzer 扩展配置&lt;/comment&gt;</span></span><br><span class="line">        <span class="attr">&lt;!--用户可以在这里配置自己的扩展字典</span> <span class="string">*** 添加扩展词典--&gt;</span></span><br><span class="line">        <span class="attr">&lt;entry</span> <span class="string">key=&quot;ext_dict&quot;&gt;ext.dic&lt;/entry&gt;</span></span><br><span class="line"><span class="attr">&lt;/properties&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3）在<code>config</code>中创建自己的词典, 新建一个 ext.dic，可以参考config目录下复制一个配置文件进行修改</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">传智播客</span></span><br><span class="line"><span class="attr">奥力给</span></span><br></pre></td></tr></table></figure>

<p><strong>4）重启elasticsearch</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">restart es</span></span><br></pre></td></tr></table></figure>

<p>查看日志</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">logs -f elasticsearch</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../../../blog02/pic/1687790038060.png" alt="img"></p>
<p>日志中已经成功加载ext.dic配置文件</p>
<p>5）测试效果：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">GET</span> <span class="string">/_analyze</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_max_word&quot;,</span></span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;传智播客Java就业超过90%,奥力给！&quot;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<p>注意当前文件的编码必须是 UTF-8 格式，严禁使用Windows记事本编辑</p>
<h3 id="停用词词典"><a href="#停用词词典" class="headerlink" title="停用词词典"></a>停用词词典</h3><p>在互联网项目中，在网络间传输的速度很快，所以很多语言是不允许在网络上传递的，如：关于宗教、政治等敏感词语，那么我们在搜索时也应该忽略当前词汇。</p>
<p>IK分词器也提供了强大的停用词功能，让我们在索引时就直接忽略当前的停用词汇表中的内容。</p>
<p>1）IKAnalyzer.cfg.xml配置文件内容添加：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">&lt;?xml</span> <span class="string">version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="attr">&lt;!DOCTYPE</span> <span class="string">properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span></span><br><span class="line"><span class="attr">&lt;properties&gt;</span></span><br><span class="line">        <span class="attr">&lt;comment&gt;IK</span> <span class="string">Analyzer 扩展配置&lt;/comment&gt;</span></span><br><span class="line">        <span class="attr">&lt;!--用户可以在这里配置自己的扩展字典--&gt;</span></span><br><span class="line">        <span class="attr">&lt;entry</span> <span class="string">key=&quot;ext_dict&quot;&gt;ext.dic&lt;/entry&gt;</span></span><br><span class="line">         <span class="attr">&lt;!--用户可以在这里配置自己的扩展停止词字典</span>  <span class="string">*** 添加停用词词典--&gt;</span></span><br><span class="line">        <span class="attr">&lt;entry</span> <span class="string">key=&quot;ext_stopwords&quot;&gt;stopword.dic&lt;/entry&gt;</span></span><br><span class="line"><span class="attr">&lt;/properties&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">&lt;properties&gt;</span></span><br><span class="line">	<span class="attr">&lt;comment&gt;IK</span> <span class="string">Analyzer 扩展配置&lt;/comment&gt;</span></span><br><span class="line">	<span class="attr">&lt;!--用户可以在这里配置自己的扩展字典</span> <span class="string">--&gt;</span></span><br><span class="line">	<span class="attr">&lt;entry</span> <span class="string">key=&quot;ext_dict&quot;&gt;itmentu_ext.dic&lt;/entry&gt;</span></span><br><span class="line">	 <span class="attr">&lt;!--用户可以在这里配置自己的扩展停止词字典--&gt;</span></span><br><span class="line">	<span class="attr">&lt;entry</span> <span class="string">key=&quot;ext_stopwords&quot;&gt;itmentu_stop.dic&lt;/entry&gt;</span></span><br><span class="line">	<span class="attr">&lt;!--用户可以在这里配置远程扩展字典</span> <span class="string">--&gt;</span></span><br><span class="line">	<span class="attr">&lt;!--</span> <span class="string">&lt;entry key=&quot;remote_ext_dict&quot;&gt;words_location&lt;/entry&gt; --&gt;</span></span><br><span class="line">	<span class="attr">&lt;!--用户可以在这里配置远程扩展停止词字典--&gt;</span></span><br><span class="line">	<span class="attr">&lt;!--</span> <span class="string">&lt;entry key=&quot;remote_ext_stopwords&quot;&gt;words_location&lt;/entry&gt; --&gt;</span></span><br><span class="line"><span class="attr">&lt;/properties&gt;</span></span><br></pre></td></tr></table></figure>

<p>3）在 stopword.dic 添加停用词</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">只因你太美</span></span><br></pre></td></tr></table></figure>

<p><strong>4）重启elasticsearch</strong></p>
<p>重启服务</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">restart elasticsearch</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">restart kibana</span></span><br></pre></td></tr></table></figure>

<p>查看日志</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">logs -f elasticsearch</span></span><br></pre></td></tr></table></figure>

<p>日志中已经成功加载stopword.dic配置文件</p>
<p><strong>5）测试效果：</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">GET</span> <span class="string">/_analyze</span></span><br><span class="line"><span class="attr">&#123;</span></span><br><span class="line">  <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_max_word&quot;,</span></span><br><span class="line">  <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;只因你太美都点赞,奥力给！&quot;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意当前文件的编码必须是 UTF-8 格式，严禁使用Windows记事本编辑</strong></p>
<h1 id="部署es集群"><a href="#部署es集群" class="headerlink" title="部署es集群"></a>部署es集群</h1><p>部署es集群可以直接使用docker-compose来完成，不过要求你的Linux虚拟机至少有4G的内存空间</p>
<p>首先编写一个docker-compose文件，内容如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">version</span>: <span class="string">&#x27;2.2&#x27;</span></span><br><span class="line"><span class="attr">services</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">es01</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">image</span>: <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.12.1</span></span><br><span class="line">    <span class="attr">container_name</span>: <span class="string">es01</span></span><br><span class="line">    <span class="attr">environment</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">node.name=es01</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">discovery.seed_hosts=es02,es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">memlock</span>:<span class="string"></span></span><br><span class="line">        <span class="attr">soft</span>: <span class="string">-1</span></span><br><span class="line">        <span class="attr">hard</span>: <span class="string">-1</span></span><br><span class="line">    <span class="attr">volumes</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">data01:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">ports</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">9200:9200</span></span><br><span class="line">    <span class="attr">networks</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">es02</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">image</span>: <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.12.1</span></span><br><span class="line">    <span class="attr">container_name</span>: <span class="string">es02</span></span><br><span class="line">    <span class="attr">environment</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">node.name=es02</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">discovery.seed_hosts=es01,es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">memlock</span>:<span class="string"></span></span><br><span class="line">        <span class="attr">soft</span>: <span class="string">-1</span></span><br><span class="line">        <span class="attr">hard</span>: <span class="string">-1</span></span><br><span class="line">    <span class="attr">volumes</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">data02:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">networks</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">es03</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">image</span>: <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.12.1</span></span><br><span class="line">    <span class="attr">container_name</span>: <span class="string">es03</span></span><br><span class="line">    <span class="attr">environment</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">node.name=es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.name=es-docker-cluster</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">discovery.seed_hosts=es01,es02</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">cluster.initial_master_nodes=es01,es02,es03</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">bootstrap.memory_lock=true</span></span><br><span class="line">      <span class="attr">-</span> <span class="string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span></span><br><span class="line">    <span class="attr">ulimits</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">memlock</span>:<span class="string"></span></span><br><span class="line">        <span class="attr">soft</span>: <span class="string">-1</span></span><br><span class="line">        <span class="attr">hard</span>: <span class="string">-1</span></span><br><span class="line">    <span class="attr">volumes</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">data03:/usr/share/elasticsearch/data</span></span><br><span class="line">    <span class="attr">networks</span>:<span class="string"></span></span><br><span class="line">      <span class="attr">-</span> <span class="string">elastic</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">data01</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">driver</span>: <span class="string">local</span></span><br><span class="line">  <span class="attr">data02</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">driver</span>: <span class="string">local</span></span><br><span class="line">  <span class="attr">data03</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">driver</span>: <span class="string">local</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks</span>:<span class="string"></span></span><br><span class="line">  <span class="attr">elastic</span>:<span class="string"></span></span><br><span class="line">    <span class="attr">driver</span>: <span class="string">bridge</span></span><br></pre></td></tr></table></figure>

<p>Run docker-compose to bring up the cluster:</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker-compose</span> <span class="string">up</span></span><br></pre></td></tr></table></figure>

<h1 id="搭建-Minio-容器"><a href="#搭建-Minio-容器" class="headerlink" title="搭建 Minio 容器"></a>搭建 Minio 容器</h1><h3 id="下载Minio镜像"><a href="#下载Minio镜像" class="headerlink" title="下载Minio镜像"></a>下载Minio镜像</h3><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>docker pull minio&#x2F;minio</td>
<td>下载最新版Minio镜像 (其实此命令就等同于 : docker pull minio&#x2F;minio:latest )</td>
</tr>
<tr>
<td>docker pull minio&#x2F;minio:RELEASE.2022-06-20T23-13-45Z.fips</td>
<td>下载指定版本的Minio镜像 (xxx指具体版本号)</td>
</tr>
</tbody></table>
<p> 检查当前所有<strong>Docker</strong>下载的镜像</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">images</span></span><br></pre></td></tr></table></figure>

<h3 id="创建目录"><a href="#创建目录" class="headerlink" title="创建目录"></a>创建目录</h3><p>一个用来存放配置，一个用来存储上传文件的目录</p>
<p>启动前需要先创建Minio外部挂载的配置文件（ &#x2F;home&#x2F;minio&#x2F;config）,和存储上传文件的目录（ &#x2F;home&#x2F;minio&#x2F;data）</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/minio/config</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/minio/data</span></span><br></pre></td></tr></table></figure>

<h3 id="创建Minio容器并运行"><a href="#创建Minio容器并运行" class="headerlink" title="创建Minio容器并运行"></a>创建Minio容器并运行</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run -p 9000:9000 -p 9090:9090 \</span></span><br><span class="line"><span class="string">     --name minio \</span></span><br><span class="line"><span class="string">     -d --restart=always \</span></span><br><span class="line"><span class="string">     -e &quot;MINIO_ACCESS_KEY=minioadmin&quot; \</span></span><br><span class="line"><span class="string">     -e &quot;MINIO_SECRET_KEY=minioadmin&quot; \</span></span><br><span class="line"><span class="string">     -v /docker/minio/data:/data \</span></span><br><span class="line"><span class="string">     -v /docker/minio/config:/root/.minio \</span></span><br><span class="line"><span class="string">     minio/minio server \</span></span><br><span class="line"><span class="string">     /data --console-address &quot;:9090&quot; -address &quot;:9000&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>-p 9000:9000 -p 9090:9090</code>：将容器内部的 9000 和 9090 端口映射到主机的对应端口。</p>
</li>
<li><p>新版minio有两个端口注意 9000给客户端使用,9090登录服务端使用</p>
</li>
<li><p>这两个端口一个是给接口调用的，还有一个就是浏览器访问的</p>
</li>
<li><p>-p 9000:9000：MinIO 服务会暴露 9000 端口来对外提供对象访问，也就是通过此端口运行的服务来访问资源</p>
</li>
<li><p>-p 9090:9090：MinIO 服务会提供一个可视化管理系统，默认在 9001 端口运行</p>
</li>
<li><p><code>--net=host</code>：使用主机的网络模式，这个选项会让容器使用主机的 IP 地址。</p>
</li>
<li><p><code>--name minio</code>：将容器命名为 minio。</p>
</li>
<li><p><code>-d</code>：以后台模式运行容器。</p>
</li>
<li><p><code>--restart=always</code>：容器退出时自动重启。</p>
</li>
<li><p><code>-e &quot;MINIO_ACCESS_KEY=minioadmin&quot;</code>：设置 MinIO 的 access key。</p>
</li>
<li><p><code>-e &quot;MINIO_SECRET_KEY=minioadmin&quot;</code>：设置 MinIO 的 secret key。</p>
</li>
<li><p><code>-v /home/minio/data:/data</code>：将本地的 <code>/home/minio/data</code> 目录挂载到容器中的 <code>/data</code> 目录。</p>
</li>
<li><p><code>-v /home/minio/config:/root/.minio</code>：将本地的 <code>/home/minio/config</code> 目录挂载到容器中的 <code>/root/.minio</code> 目录，用于存储 MinIO 的配置文件。</p>
</li>
<li><p><code>minio/minio server /data</code>：指定使用 MinIO 的镜像，并以 <code>/data</code> 目录作为数据目录启动 MinIO 服务。</p>
</li>
<li><p><code>--console-address &quot;:9090&quot; -address &quot;:9000&quot;</code>：分别指定在主机上监听的控制台地址和 MinIO 服务地址。</p>
</li>
<li><p><code>--console-address</code> 和 <code>-address</code> 选项用于指定 MinIO 控制台和服务的监听地址和端口。具体含义如下：</p>
<ul>
<li><code>--console-address &quot;:9090&quot;</code>：指定控制台的监听地址和端口，冒号后面为空表示使用默认的 IP 地址（0.0.0.0），端口号为 9090。这个地址和端口用于访问 MinIO 控制台。</li>
<li><code>-address &quot;:9000&quot;</code>：指定 MinIO 服务的监听地址和端口，冒号后面为空表示使用默认的 IP 地址（0.0.0.0），端口号为 9000。这个地址和端口用于访问 MinIO 服务。</li>
</ul>
<p>在这个命令中，控制台地址和端口为 <code>:9090</code>，服务地址和端口为 <code>:9000</code>，分别表示使用默认的 IP 地址 0.0.0.0。由于在命令中使用了 <code>-p</code> 选项将容器内部的端口映射到了主机上，所以实际访问时需要使用主机的 IP 地址和映射的端口。例如，在这个命令中将主机的 9000 端口映射到了容器的 9000 端口，所以需要通过 <code>http://your-server-ip:9000</code> 访问 MinIO 服务。</p>
</li>
</ul>
<h3 id="访问操作"><a href="#访问操作" class="headerlink" title="访问操作"></a>访问操作</h3><p>访问：<a target="_blank" rel="noopener" href="http://192.168.124.132:9090/login">http://192.168.124.132:9090/login</a> 用户名：密码 <strong>minioadmin</strong>：<strong>minioadmin</strong></p>
<h1 id="Docker-安装Mysql"><a href="#Docker-安装Mysql" class="headerlink" title="Docker 安装Mysql"></a>Docker 安装Mysql</h1><h2 id="1、寻找Mysql镜像"><a href="#1、寻找Mysql镜像" class="headerlink" title="1、寻找Mysql镜像"></a>1、寻找Mysql镜像</h2><p>在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Docker%E9%95%9C%E5%83%8F&spm=1001.2101.3001.7020">Docker镜像</a>仓库寻找Mysql镜像</p>
<p><a href="https://link.juejin.cn/?target=https://hub.docker.com/_/mysql">DockerHub–&gt;Mysql</a></p>
<h2 id="2、下载Mysql镜像"><a href="#2、下载Mysql镜像" class="headerlink" title="2、下载Mysql镜像"></a>2、下载Mysql镜像</h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>docker pull mysql</td>
<td>下载最新版Mysql镜像 (其实此命令就等同于 : docker pull mysql:latest )</td>
</tr>
<tr>
<td>docker pull mysql:xxx</td>
<td>下载指定版本的Mysql镜像 (xxx指具体版本号)</td>
</tr>
</tbody></table>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">pull mysql:8.0</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p> 检查当前所有Docker下载的镜像</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h2 id="3、创建目录"><a href="#3、创建目录" class="headerlink" title="3、创建目录"></a>3、创建目录</h2><p>一个用来存放配置，一个用来存储上传文件的目录</p>
<p>启动前需要先创建Minio外部挂载的配置文件（ &#x2F;home&#x2F;minio&#x2F;config）,和存储上传文件的目录（ &#x2F;home&#x2F;minio&#x2F;data）</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/mysql/log</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/mysql/data</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/mysql/conf</span></span><br></pre></td></tr></table></figure>

<p>创建配置文件</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">vim</span> <span class="string">/docker/mysql/etc/my.cnf</span></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">[mysqld]</span></span><br><span class="line"><span class="attr">bind-address</span>=<span class="string">0.0.0.0</span></span><br><span class="line"><span class="attr">port</span>=<span class="string">3306</span></span><br><span class="line"><span class="comment">#user=mysql</span></span><br><span class="line"><span class="attr">character_set_server</span>=<span class="string">utf8mb4</span></span><br><span class="line"><span class="attr">collation-server</span>=<span class="string">utf8mb4_general_ci</span></span><br><span class="line"><span class="attr">symbolic-links</span>=<span class="string">0</span></span><br><span class="line"><span class="attr">explicit_defaults_for_timestamp</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#sql_mode=ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER</span></span><br><span class="line"><span class="attr">max-connections</span> = <span class="string">1000</span></span><br><span class="line"><span class="attr">max_user_connections</span> = <span class="string">1000</span></span><br><span class="line"><span class="comment">#innodb_buffer_pool_size=1G</span></span><br><span class="line"><span class="comment">#innodb_buffer_pool_chunk_size=128M</span></span><br><span class="line"><span class="comment">#innodb_buffer_pool_instances=8</span></span><br><span class="line"><span class="comment">#key_buffer_size = 1024M</span></span><br><span class="line"><span class="comment">#sort_buffer_size = 16M</span></span><br><span class="line"><span class="comment">#join_buffer_size = 16M</span></span><br><span class="line"><span class="comment">#read_buffer_size = 4M</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8mb4</span></span><br><span class="line"></span><br><span class="line"><span class="attr">[client]</span></span><br><span class="line"><span class="attr">default-character-set</span>=<span class="string">utf8mb4</span></span><br></pre></td></tr></table></figure>



<h2 id="4、创建mysql容器并运行"><a href="#4、创建mysql容器并运行" class="headerlink" title="4、创建mysql容器并运行"></a>4、创建mysql容器并运行</h2><h3 id="MySQL-5"><a href="#MySQL-5" class="headerlink" title="MySQL 5"></a>MySQL 5</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run \</span></span><br><span class="line"><span class="string">--name mysql \</span></span><br><span class="line"><span class="string">-d \</span></span><br><span class="line"><span class="string">-p 3306:3306 \</span></span><br><span class="line"><span class="string">--restart unless-stopped \</span></span><br><span class="line"><span class="string">-v /dockerData/xuecheng-data/mysql/log:/var/log/mysql \</span></span><br><span class="line"><span class="string">-v /dockerData/xuecheng-data/mysql/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /dockerData/xuecheng-data/mysql/conf:/etc/mysql \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=123456 \</span></span><br><span class="line"><span class="string">mysql:5.7</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>docker run</td>
<td>创建一个新的容器 , 同时运行这个容器</td>
</tr>
<tr>
<td>–name mysql</td>
<td>启动容器的名字</td>
</tr>
<tr>
<td>-d</td>
<td>后台运行</td>
</tr>
<tr>
<td>-p 3306:3306</td>
<td>将容器的 3306 (后面那个) 端口映射到主机的 3306 (前面那个) 端口</td>
</tr>
<tr>
<td>–restart unless-stopped</td>
<td>容器重启策略</td>
</tr>
<tr>
<td>-v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql</td>
<td>将日志文件夹挂载到主机</td>
</tr>
<tr>
<td>-v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql</td>
<td>将mysql储存文件夹挂载到主机</td>
</tr>
<tr>
<td>-v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql</td>
<td>将配置文件夹挂载到主机</td>
</tr>
<tr>
<td>-e MYSQL_ROOT_PASSWORD&#x3D;root</td>
<td>设置 root 用户的密码</td>
</tr>
<tr>
<td>mysql:5.7</td>
<td>启动哪个版本的 mysql (本地镜像的版本)</td>
</tr>
<tr>
<td>\</td>
<td>shell 命令换行符</td>
</tr>
</tbody></table>
<p> 注意 : 命令中所有 冒号 前面的是主机配置 , 冒号 后面的是mysql容器配置 。<br>–restart unless-stopped : 在docker重启时重启当前容器。但不包含docker重启时已停止的容器。</p>
<h3 id="MySQL-8"><a href="#MySQL-8" class="headerlink" title="MySQL 8"></a>MySQL 8</h3><p><strong>注：创建mysql8容器时需要加上映射目录mysql-files</strong></p>
<p>创建目录</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">/docker/mysql/mysql-files</span></span><br></pre></td></tr></table></figure>

<p>创建mysql容器</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run \</span></span><br><span class="line"><span class="string">--name mysql \</span></span><br><span class="line"><span class="string">--restart unless-stopped \</span></span><br><span class="line"><span class="string">-v /docker/mysql/conf/my.cnf:/etc/my.cnf \</span></span><br><span class="line"><span class="string">-v /docker/mysql/data:/var/lib/mysql \</span></span><br><span class="line"><span class="string">-v /docker/mysql/log:/var/log \</span></span><br><span class="line"><span class="string">-v /docker/mysql/mysql-files:/var/lib/mysql-files \</span></span><br><span class="line"><span class="string">-p 3306:3306 \</span></span><br><span class="line"><span class="string">-e MYSQL_ROOT_PASSWORD=&#x27;root&#x27; \</span></span><br><span class="line"><span class="string">-d mysql:latest</span></span><br></pre></td></tr></table></figure>

<p>进入mysql容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 通过Docker命令进入Mysql容器内部</span><br><span class="line">docker exec -it mysql /bin/bash</span><br><span class="line">## 或者</span><br><span class="line">docker exec -it mysql bash</span><br></pre></td></tr></table></figure>

<p><strong>连接mysql</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure>

<h1 id="docker安装nacos"><a href="#docker安装nacos" class="headerlink" title="docker安装nacos"></a>docker安装nacos</h1><h3 id="一、下载Nacos镜像"><a href="#一、下载Nacos镜像" class="headerlink" title="一、下载Nacos镜像"></a>一、下载Nacos镜像</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull nacos/nacos-server</span><br></pre></td></tr></table></figure>

<h3 id="二、创建日志、配置文件"><a href="#二、创建日志、配置文件" class="headerlink" title="二、创建日志、配置文件"></a>二、创建日志、配置文件</h3><figure class="highlight scala"><table><tr><td class="code"><pre><span class="line">mkdir -p /docker/nacos/logs</span><br><span class="line">mkdir -p /docker/nacos/conf</span><br><span class="line">touch  /docker/nacos/conf/application.properties</span><br></pre></td></tr></table></figure>

<h3 id="三、创建数据库"><a href="#三、创建数据库" class="headerlink" title="三、创建数据库"></a><strong>三、创建数据库</strong></h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = config_info   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `config_info` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(255) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`content`</span> <span class="string">longtext NOT NULL COMMENT &#x27;content&#x27;,</span></span><br><span class="line">  <span class="attr">`md5`</span> <span class="string">varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">`src_user`</span> <span class="string">text COMMENT &#x27;source user&#x27;,</span></span><br><span class="line">  <span class="attr">`src_ip`</span> <span class="string">varchar(20) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span></span><br><span class="line">  <span class="attr">`app_name`</span> <span class="string">varchar(128) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span></span><br><span class="line">  <span class="attr">`c_desc`</span> <span class="string">varchar(256) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`c_use`</span> <span class="string">varchar(64) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`effect`</span> <span class="string">varchar(64) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`type`</span> <span class="string">varchar(64) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`c_schema`</span> <span class="string">text,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = config_info_aggr   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `config_info_aggr` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;group_id&#x27;,</span></span><br><span class="line">  <span class="attr">`datum_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;datum_id&#x27;,</span></span><br><span class="line">  <span class="attr">`content`</span> <span class="string">longtext NOT NULL COMMENT &#x27;内容&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">`app_name`</span> <span class="string">varchar(128) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;增加租户字段&#x27;;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = config_info_beta   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `config_info_beta` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span></span><br><span class="line">  <span class="attr">`app_name`</span> <span class="string">varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span></span><br><span class="line">  <span class="attr">`content`</span> <span class="string">longtext NOT NULL COMMENT &#x27;content&#x27;,</span></span><br><span class="line">  <span class="attr">`beta_ips`</span> <span class="string">varchar(1024) DEFAULT NULL COMMENT &#x27;betaIps&#x27;,</span></span><br><span class="line">  <span class="attr">`md5`</span> <span class="string">varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">`src_user`</span> <span class="string">text COMMENT &#x27;source user&#x27;,</span></span><br><span class="line">  <span class="attr">`src_ip`</span> <span class="string">varchar(20) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_beta&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = config_info_tag   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `config_info_tag` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span></span><br><span class="line">  <span class="attr">`tag_id`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;tag_id&#x27;,</span></span><br><span class="line">  <span class="attr">`app_name`</span> <span class="string">varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span></span><br><span class="line">  <span class="attr">`content`</span> <span class="string">longtext NOT NULL COMMENT &#x27;content&#x27;,</span></span><br><span class="line">  <span class="attr">`md5`</span> <span class="string">varchar(32) DEFAULT NULL COMMENT &#x27;md5&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">`src_user`</span> <span class="string">text COMMENT &#x27;source user&#x27;,</span></span><br><span class="line">  <span class="attr">`src_ip`</span> <span class="string">varchar(20) DEFAULT NULL COMMENT &#x27;source ip&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_info_tag&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos  */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = config_tags_relation   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `config_tags_relation` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`tag_name`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;tag_name&#x27;,</span></span><br><span class="line">  <span class="attr">`tag_type`</span> <span class="string">varchar(64) DEFAULT NULL COMMENT &#x27;tag_type&#x27;,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL COMMENT &#x27;data_id&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;group_id&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span></span><br><span class="line">  <span class="attr">`nid`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`nid`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),</span></span><br><span class="line">  <span class="attr">KEY</span> <span class="string">`idx_tenant_id` (`tenant_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;config_tag_relation&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = group_capacity   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `group_capacity` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Group ID，空字符表示整个集群&#x27;,</span></span><br><span class="line">  <span class="attr">`quota`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`usage`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span></span><br><span class="line">  <span class="attr">`max_size`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`max_aggr_count`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数，，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`max_aggr_size`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`max_history_count`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_group_id` (`group_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;集群、各Group容量信息表&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = his_config_info   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `his_config_info` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(64) unsigned NOT NULL,</span></span><br><span class="line">  <span class="attr">`nid`</span> <span class="string">bigint(20) unsigned NOT NULL AUTO_INCREMENT,</span></span><br><span class="line">  <span class="attr">`data_id`</span> <span class="string">varchar(255) NOT NULL,</span></span><br><span class="line">  <span class="attr">`group_id`</span> <span class="string">varchar(128) NOT NULL,</span></span><br><span class="line">  <span class="attr">`app_name`</span> <span class="string">varchar(128) DEFAULT NULL COMMENT &#x27;app_name&#x27;,</span></span><br><span class="line">  <span class="attr">`content`</span> <span class="string">longtext NOT NULL,</span></span><br><span class="line">  <span class="attr">`md5`</span> <span class="string">varchar(32) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27;,</span></span><br><span class="line">  <span class="attr">`src_user`</span> <span class="string">text,</span></span><br><span class="line">  <span class="attr">`src_ip`</span> <span class="string">varchar(20) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`op_type`</span> <span class="string">char(10) DEFAULT NULL,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) DEFAULT &#x27;&#x27; COMMENT &#x27;租户字段&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`nid`),</span></span><br><span class="line">  <span class="attr">KEY</span> <span class="string">`idx_gmt_create` (`gmt_create`),</span></span><br><span class="line">  <span class="attr">KEY</span> <span class="string">`idx_gmt_modified` (`gmt_modified`),</span></span><br><span class="line">  <span class="attr">KEY</span> <span class="string">`idx_did` (`data_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;多租户改造&#x27;;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">数据库全名 = ibp-nacos   */</span></span><br><span class="line"><span class="attr">/*</span>   <span class="string">表名称 = tenant_capacity   */</span></span><br><span class="line"><span class="attr">/******************************************/</span></span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `tenant_capacity` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT &#x27;主键ID&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) NOT NULL DEFAULT &#x27;&#x27; COMMENT &#x27;Tenant ID&#x27;,</span></span><br><span class="line">  <span class="attr">`quota`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;配额，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`usage`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;使用量&#x27;,</span></span><br><span class="line">  <span class="attr">`max_size`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个配置大小上限，单位为字节，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`max_aggr_count`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;聚合子配置最大个数&#x27;,</span></span><br><span class="line">  <span class="attr">`max_aggr_size`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值&#x27;,</span></span><br><span class="line">  <span class="attr">`max_history_count`</span> <span class="string">int(10) unsigned NOT NULL DEFAULT &#x27;0&#x27; COMMENT &#x27;最大变更历史数量&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">datetime NOT NULL DEFAULT &#x27;2010-05-05 00:00:00&#x27; COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_tenant_id` (`tenant_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;租户容量信息表&#x27;;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE `tenant_info` (</span></span><br><span class="line">  <span class="attr">`id`</span> <span class="string">bigint(20) NOT NULL AUTO_INCREMENT COMMENT &#x27;id&#x27;,</span></span><br><span class="line">  <span class="attr">`kp`</span> <span class="string">varchar(128) NOT NULL COMMENT &#x27;kp&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_id`</span> <span class="string">varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_id&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_name`</span> <span class="string">varchar(128) default &#x27;&#x27; COMMENT &#x27;tenant_name&#x27;,</span></span><br><span class="line">  <span class="attr">`tenant_desc`</span> <span class="string">varchar(256) DEFAULT NULL COMMENT &#x27;tenant_desc&#x27;,</span></span><br><span class="line">  <span class="attr">`create_source`</span> <span class="string">varchar(32) DEFAULT NULL COMMENT &#x27;create_source&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_create`</span> <span class="string">bigint(20) NOT NULL COMMENT &#x27;创建时间&#x27;,</span></span><br><span class="line">  <span class="attr">`gmt_modified`</span> <span class="string">bigint(20) NOT NULL COMMENT &#x27;修改时间&#x27;,</span></span><br><span class="line">  <span class="attr">PRIMARY</span> <span class="string">KEY (`id`),</span></span><br><span class="line">  <span class="attr">UNIQUE</span> <span class="string">KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),</span></span><br><span class="line">  <span class="attr">KEY</span> <span class="string">`idx_tenant_id` (`tenant_id`)</span></span><br><span class="line"><span class="attr">)</span> <span class="string">ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin COMMENT=&#x27;tenant_info&#x27;;</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE users (</span></span><br><span class="line">	<span class="attr">username</span> <span class="string">varchar(50) NOT NULL PRIMARY KEY,</span></span><br><span class="line">	<span class="attr">password</span> <span class="string">varchar(500) NOT NULL,</span></span><br><span class="line">	<span class="attr">enabled</span> <span class="string">boolean NOT NULL</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE roles (</span></span><br><span class="line">	<span class="attr">username</span> <span class="string">varchar(50) NOT NULL,</span></span><br><span class="line">	<span class="attr">role</span> <span class="string">varchar(50) NOT NULL,</span></span><br><span class="line">	<span class="attr">constraint</span> <span class="string">uk_username_role UNIQUE (username,role)</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">CREATE</span> <span class="string">TABLE permissions (</span></span><br><span class="line">    <span class="attr">role</span> <span class="string">varchar(50) NOT NULL,</span></span><br><span class="line">    <span class="attr">resource</span> <span class="string">varchar(512) NOT NULL,</span></span><br><span class="line">    <span class="attr">action</span> <span class="string">varchar(8) NOT NULL,</span></span><br><span class="line">    <span class="attr">constraint</span> <span class="string">uk_role_permission UNIQUE (role,resource,action)</span></span><br><span class="line"><span class="attr">);</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO users (username, password, enabled) VALUES (&#x27;nacos&#x27;, &#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;, TRUE);</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">INSERT</span> <span class="string">INTO roles (username, role) VALUES (&#x27;nacos&#x27;, &#x27;ROLE_ADMIN&#x27;);</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure>



<h3 id="四、配置application-properties"><a href="#四、配置application-properties" class="headerlink" title="四、配置application.properties"></a><strong>四、配置application.properties</strong></h3><figure class="highlight vbnet"><table><tr><td class="code"><pre><span class="line">vi /docker/nacos/conf/application.properties</span><br></pre></td></tr></table></figure>

<p>修改MySQL连接配置</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.contextPath</span>=<span class="string">/nacos</span></span><br><span class="line"><span class="attr">server.servlet.contextPath</span>=<span class="string">/nacos</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8848</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">spring.datasource.platform</span>=<span class="string">mysql</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">db.num</span>=<span class="string">1</span></span><br><span class="line"><span class="attr">db.url.0</span>=<span class="string">jdbc:mysql://192.168.1.88:3307/ibp-nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span></span><br><span class="line"><span class="attr">db.user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">db.password</span>=<span class="string">Qakj123456</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">nacos.cmdb.dumpTaskInterval</span>=<span class="string">3600</span></span><br><span class="line"><span class="attr">nacos.cmdb.eventTaskInterval</span>=<span class="string">10</span></span><br><span class="line"><span class="attr">nacos.cmdb.labelTaskInterval</span>=<span class="string">300</span></span><br><span class="line"><span class="attr">nacos.cmdb.loadDataAtStart</span>=<span class="string">false</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">management.metrics.export.elastic.enabled</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">management.metrics.export.influx.enabled</span>=<span class="string">false</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">server.tomcat.accesslog.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">server.tomcat.accesslog.pattern</span>=<span class="string">%h %l %u %t &quot;%r&quot; %s %b %D %&#123;User-Agent&#125;i</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">nacos.security.ignore.urls</span>=<span class="string">/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/v1/auth/login,/v1/console/health/**,/v1/cs/**,/v1/ns/**,/v1/cmdb/**,/actuator/**,/v1/console/server/**</span></span><br><span class="line"><span class="attr">nacos.naming.distro.taskDispatchThreadCount</span>=<span class="string">1</span></span><br><span class="line"><span class="attr">nacos.naming.distro.taskDispatchPeriod</span>=<span class="string">200</span></span><br><span class="line"><span class="attr">nacos.naming.distro.batchSyncKeyCount</span>=<span class="string">1000</span></span><br><span class="line"><span class="attr">nacos.naming.distro.initDataRatio</span>=<span class="string">0.9</span></span><br><span class="line"><span class="attr">nacos.naming.distro.syncRetryDelay</span>=<span class="string">5000</span></span><br><span class="line"><span class="attr">nacos.naming.data.warmup</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">nacos.naming.expireInstance</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>



<h3 id="五、docker运行命令"><a href="#五、docker运行命令" class="headerlink" title="五、docker运行命令"></a><strong>五、docker运行命令</strong></h3><figure class="highlight vbscript"><table><tr><td class="code"><pre><span class="line">docker run --name nacos -d \</span><br><span class="line">-p <span class="number">8848</span>:<span class="number">8848</span> \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">--restart=always \</span><br><span class="line">-e JVM_XMS=<span class="number">256</span>m \</span><br><span class="line">-e JVM_XMX=<span class="number">256</span>m \</span><br><span class="line">-e MODE=standalone \</span><br><span class="line">-e TIME_ZONE=<span class="comment">&#x27;Asia/Shanghai&#x27; \</span></span><br><span class="line">-v /docker/nacos/logs:/home/nacos/logs \</span><br><span class="line">-v /docker/nacos/conf/application.properties:/home/nacos/conf/application.properties \</span><br><span class="line">nacos/nacos-<span class="built_in">server</span></span><br></pre></td></tr></table></figure>

<p><strong>查看docker日志</strong></p>
<figure class="highlight vbscript"><table><tr><td class="code"><pre><span class="line">docker logs -f -t nacos</span><br></pre></td></tr></table></figure>

<h3 id="六、浏览器登录"><a href="#六、浏览器登录" class="headerlink" title="六、浏览器登录"></a>六、浏览器登录</h3><p><em><a target="_blank" rel="noopener" href="http://192.168.101.129:8848/nacos">http://192.168.101.129:8848/nacos</a>  用户名密码：nacos&#x2F;nacos</em></p>
<h1 id="docker安装Nginx"><a href="#docker安装Nginx" class="headerlink" title="docker安装Nginx"></a>docker安装Nginx</h1><h2 id="下载Nginx镜像"><a href="#下载Nginx镜像" class="headerlink" title="下载Nginx镜像"></a>下载Nginx镜像</h2><p>下载最新版本的nginx的镜像</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">pull nginx:latest</span></span><br></pre></td></tr></table></figure>

<h2 id="运行nginx镜像"><a href="#运行nginx镜像" class="headerlink" title="运行nginx镜像"></a>运行nginx镜像</h2><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run --name nginx -p 80:80 -d nginx</span></span><br></pre></td></tr></table></figure>

<ul>
<li>参数详解<ul>
<li>–name nginx 指定容器的名称</li>
<li>-p 80:80 映射端口</li>
<li>-d 守护进程运行</li>
</ul>
</li>
</ul>
<h2 id="从nginx容器中映射核心文件"><a href="#从nginx容器中映射核心文件" class="headerlink" title="从nginx容器中映射核心文件"></a>从nginx容器中映射核心文件</h2><ul>
<li>1、本地创建文件目录</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建挂载目录</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/nginx/conf</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/nginx/log</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/nginx/html</span></span><br></pre></td></tr></table></figure>

<ul>
<li>2、拷贝nginx容器对应的文件默认配置</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将容器nginx.conf文件复制到宿主机</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">cp nginx:/etc/nginx/nginx.conf /docker/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="comment"># 将容器conf.d文件夹下内容复制到宿主机</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">cp nginx:/etc/nginx/conf.d /docker/nginx/conf/conf.d</span></span><br><span class="line"><span class="comment"># 将容器中的html文件夹复制到宿主机</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">cp nginx:/usr/share/nginx/html /docker/nginx/</span></span><br></pre></td></tr></table></figure>

<ul>
<li>3、停止并删除nginx容器</li>
</ul>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">stop nginx </span></span><br><span class="line"></span><br><span class="line"><span class="attr">docker</span> <span class="string">rm nginx</span></span><br></pre></td></tr></table></figure>

<p>删除正在运行的nginx容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker rm -f nginx</span><br></pre></td></tr></table></figure>



<h2 id="重新启动nginx镜像重新新容器"><a href="#重新启动nginx镜像重新新容器" class="headerlink" title="重新启动nginx镜像重新新容器"></a>重新启动nginx镜像重新新容器</h2><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run \</span></span><br><span class="line"><span class="string">-p 80:80 \</span></span><br><span class="line"><span class="string">--name nginx \</span></span><br><span class="line"><span class="string">-v /docker/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \</span></span><br><span class="line"><span class="string">-v /docker/nginx/conf/conf.d:/etc/nginx/conf.d \</span></span><br><span class="line"><span class="string">-v /docker/nginx/log:/var/log/nginx \</span></span><br><span class="line"><span class="string">-v /docker/nginx/html:/usr/share/nginx/html \</span></span><br><span class="line"><span class="string">-d nginx:latest</span></span><br></pre></td></tr></table></figure>

<h1 id="Docker安装Redis"><a href="#Docker安装Redis" class="headerlink" title="Docker安装Redis"></a>Docker安装Redis</h1><h3 id="一、Docker搜索redis镜像"><a href="#一、Docker搜索redis镜像" class="headerlink" title="一、Docker搜索redis镜像"></a>一、Docker搜索redis镜像</h3><blockquote>
<p>命令：docker search &lt;镜像名称&gt;</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">search redis</span></span><br></pre></td></tr></table></figure>

<p>可以看到有很多redis的镜像，此处因没有指定版本，所以下载的就是默认的最新版本 。<strong>redis latest.</strong></p>
<h3 id="二、Docker拉取镜像"><a href="#二、Docker拉取镜像" class="headerlink" title="二、Docker拉取镜像"></a>二、Docker拉取镜像</h3><blockquote>
<p>命令：：docker pull &lt;镜像名称&gt;:&lt;版本号&gt;</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">pull redis</span></span><br></pre></td></tr></table></figure>

<h3 id="三、简单的启动一个Redis"><a href="#三、简单的启动一个Redis" class="headerlink" title="三、简单的启动一个Redis"></a>三、简单的启动一个Redis</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 从docker仓库中拉取redis最新的镜像</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">pull redis</span></span><br><span class="line"><span class="comment"># 运行一个redis容器</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run --name redis -p 6380:6379 -d redis</span></span><br><span class="line"><span class="comment"># 运行redis容器，并指定密码</span></span><br><span class="line"><span class="attr">docker</span> <span class="string">run --name redis -p 6380:6379 -d redis --requirepass &quot;123456&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="四、查看docker容器中的redis版本"><a href="#四、查看docker容器中的redis版本" class="headerlink" title="四、查看docker容器中的redis版本"></a>四、查看docker容器中的redis版本</h3><p>在下载之前，先查看docker容器中的redis版本，打开redis-cli，通过info指令可以获取到版本号。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230624135155018.png" alt="img"></p>
<h3 id="五、redis-conf下载"><a href="#五、redis-conf下载" class="headerlink" title="五、redis.conf下载"></a>五、redis.conf下载</h3><p>redis的每个版本都有一个默认的<code>redis.conf</code>配置文件，这个配置文件可以在官网去下载，也可以下载对应版本的tar包，从tar包中获取。<br><a target="_blank" rel="noopener" href="http://download.redis.io/releases/">附：Redis tar包下载地址</a></p>
<p><strong>注：redis.conf的版本需要和redis容器的版本一致，否则可能会启动失败。</strong></p>
<p>修改配置文件</p>
<p>主要配置的如下：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">bind</span> <span class="string">127.0.0.1  #注释掉这部分，使redis可以外部访问</span></span><br><span class="line"><span class="attr">daemonize</span> <span class="string">no	#用守护线程的方式启动</span></span><br><span class="line"><span class="attr">requirepass</span> <span class="string">123456 #密码 给redis设置密码</span></span><br><span class="line"><span class="attr">appendonly</span> <span class="string">yes	#redis持久化　　默认是no</span></span><br><span class="line"><span class="attr">tcp-keepalive</span> <span class="string">300 	#防止出现远程主机强迫关闭了一个现有的连接的错误 默认是300</span></span><br><span class="line"><span class="attr">dir</span> <span class="string">/data</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230624140352616.png" alt="img"></p>
<h3 id="六、配置持久化策略"><a href="#六、配置持久化策略" class="headerlink" title="六、配置持久化策略"></a>六、配置持久化策略</h3><p><strong>创建目录</strong></p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/redis/data</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">-p /docker/redis/conf</span></span><br></pre></td></tr></table></figure>

<p>将<strong>redis.conf</strong>文件上传到conf目录下</p>
<h3 id="七、配置映射并启动"><a href="#七、配置映射并启动" class="headerlink" title="七、配置映射并启动"></a>七、配置映射并启动</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">run --name redis -p 6379:6379 \</span></span><br><span class="line"><span class="string">-v /docker/redis/data:/data \</span></span><br><span class="line"><span class="string">-v /docker/redis/conf/redis.conf:/etc/redis/redis.conf --privileged=true -d redis \</span></span><br><span class="line"><span class="string">redis-server /etc/redis/redis.conf </span></span><br></pre></td></tr></table></figure>

<p><code>-p 6379:6379</code>:把容器内的6379端口映射到宿主机6379端口<br> <code>-v /data/redis/redis.conf:/etc/redis/redis.conf</code>：把宿主机配置好的redis.conf放到容器内的这个位置中<br> <code>-v /data/redis/data:/data</code>：把redis持久化的数据在宿主机内显示，做数据备份<br> <code>redis-server /etc/redis/redis.conf</code>：这个是关键配置，让redis不是无配置启动，而是按照这个redis.conf的配置启动<br> <code>–appendonly yes</code>：redis启动后数据持久化</p>
<p>查看启动日志：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">docker</span> <span class="string">logs -f redis</span></span><br></pre></td></tr></table></figure>



<h1 id="docker创建gogs容器"><a href="#docker创建gogs容器" class="headerlink" title="docker创建gogs容器"></a><strong>docker创建gogs容器</strong></h1><h2 id="1-创建新用户："><a href="#1-创建新用户：" class="headerlink" title="1. 创建新用户："></a><strong>1. 创建新用户：</strong></h2><p>MySql8有新的安全要求，不能像之前的版本那样一次性创建用户并授权需要先创建用户，再进行授权操作</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;gogs&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;gogs&#x27;</span>; </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span>; </span><br></pre></td></tr></table></figure>

<p>其中<code>username</code>为自定义的用户名；<code>host</code>为登录域名，<code>host</code>为<code>&#39;%&#39;</code>时表示为 任意IP，为<code>localhost</code>时表示本机，或者填写指定的IP地址；<code>paasword</code>为密码</p>
<h2 id="2-为用户授权："><a href="#2-为用户授权：" class="headerlink" title="2. 为用户授权："></a><strong>2. 为用户授权：</strong></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> gogs.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;gogs&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option; </span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option; </span><br></pre></td></tr></table></figure>

<h2 id="3-授权之后刷新权限："><a href="#3-授权之后刷新权限：" class="headerlink" title="3. 授权之后刷新权限："></a><strong>3. 授权之后刷新权限：</strong></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">flush privileges; </span><br></pre></td></tr></table></figure>

<h2 id="4-撤销授权"><a href="#4-撤销授权" class="headerlink" title="4.撤销授权"></a><strong>4.撤销授权</strong></h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#收回权限(不包含赋权权限)</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> user_name;</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> user_name.<span class="operator">*</span> <span class="keyword">FROM</span> user_name;</span><br><span class="line">#收回赋权权限</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">GRANT</span> OPTION <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> user_name;</span><br><span class="line"></span><br><span class="line">#操作完后重新刷新权限</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>



<h2 id="5、拉取镜像"><a href="#5、拉取镜像" class="headerlink" title="5、拉取镜像"></a>5、拉取镜像</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker pull gogs/gogs</span><br></pre></td></tr></table></figure>

<h2 id="6、运行镜像"><a href="#6、运行镜像" class="headerlink" title="6、运行镜像"></a>6、运行镜像</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -d --name=gogs -p 10022:22 -p 10880:3000 -v /dockerData/xuecheng-data/gogs:/data gogs/gogs</span><br></pre></td></tr></table></figure>

<h2 id="7、配置环境"><a href="#7、配置环境" class="headerlink" title="7、配置环境"></a>7、配置环境</h2><p>登录页面: ****，修改以下标红的内容</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230530205430247.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230530210207014.png" alt="img"></p>
<p>禁止用户注册并设置gogs页面的管理员账号：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230530210410854.png" alt="image-20230530210410854"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/1687790038061-19.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/./../pic/20230530210607462.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">注：上图的应用基本设置</span><br><span class="line">    应用名称：可以换成自定义名称</span><br><span class="line">    仓库根目录：使用默认就行了，默认/data/git/gogs-repositories。如果采用了数据卷映射，比如我这里因为/server/docker/gogs/data映射/data，需要给这个目录777权限，负责会创建失败。</span><br><span class="line">    域名：使用ssh时使用的域名或者IP</span><br><span class="line">    SSH 端口号：gogs启用ssh时使用的端口号，默认22端口，如果修改了这个端口号，那么在上面创建容器时要对应的将10022端口映射到修改的端口号，如果不启用ssh，则置空</span><br><span class="line">    HTTP 端口号：gogs应用启动的http端口，默认3000，如果修改了这个端口号，那么在上面创建容器时要对应的将10080端口映射到修改的端口号</span><br><span class="line">    应用 URL：即打开应用的url地址，因为这里采用了docker，所以我们要修改成宿主机的地址转发去访问，比如这里我的宿主机地址：192.168.1.20，它的10080端口会转发到容器的3000端口，所以这里填：http://192.168.1.20:10080/</span><br><span class="line">    日志路径：gogs的日志保存路径，默认就行了</span><br><span class="line"></span><br><span class="line">##安装程序运行完成后，会生成一个app.ini文件，在宿主机映射目录/server/docker/gogs/data/gogs/conf/app.ini，其中有相关的配置信息，尽量不要修改此文件，可能导致服务无法访问。</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://adanpro.gitee.io/adanblog">ADAN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://adanpro.gitee.io/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/">https://adanpro.gitee.io/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://www.adan.com" target="_blank">ADAN</a> 许可协议。转载请注明来自 <a href="https://adanpro.gitee.io/adanblog" target="_blank">光明</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/adanblog/tags/dokcer/">dokcer</a></div><div class="post_share"><div class="social-share" data-image="/adanblog/img/2.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/adanblog/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/adanblog/2023/06/28/%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/" title="媒资管理模块"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/9.jpg" onerror="onerror=null;src='/adanblog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">媒资管理模块</div></div></a></div><div class="next-post pull-right"><a href="/adanblog/2023/06/28/docker/" title="docker"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/8.jpg" onerror="onerror=null;src='/adanblog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">docker</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/king.jpg" onerror="this.onerror=null;this.src='/adanblog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ADAN</div><div class="author-info__description">如有一味绝境，非历十方生死</div></div><div class="card-info-data site-data is-center"><a href="/adanblog/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/adanblog/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/adanblog/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://weixin.com/" target="_blank" title="weixin"><i class="iconfont icon-weixin"></i></a><a class="social-icon" href="https://qq.com/" target="_blank" title="2028038953"><i class="iconfont icon-QQ"></i></a><a class="social-icon" href="mailto:2028038953@qq.com" target="_blank" title="2028038953@qq.com"><i class="iconfont icon-youxiang"></i></a><a class="social-icon" href="https://gitee.com/" target="_blank" title="gitee"><i class="iconfont icon-gitee"></i></a><a class="social-icon" href="https://bilibili.com/" target="_blank" title="bilibili"><i class="iconfont icon-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%8D%B8%E8%BD%BD%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">1.卸载（可选）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85docker"><span class="toc-number">1.2.</span> <span class="toc-text">2.安装docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%90%AF%E5%8A%A8docker"><span class="toc-number">1.3.</span> <span class="toc-text">3.启动docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E5%8A%A0%E9%80%9F"><span class="toc-number">1.4.</span> <span class="toc-text">4.配置镜像加速</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8docker"><span class="toc-number">1.5.</span> <span class="toc-text">5 设置开机启动docker</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-%E9%85%8D%E7%BD%AEElasticsearch"><span class="toc-number">2.</span> <span class="toc-text">Docker 配置Elasticsearch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Kibana"><span class="toc-number">3.</span> <span class="toc-text">Kibana</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Kibana%E4%B8%AD%E6%96%87%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.</span> <span class="toc-text">Kibana中文配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IK%E5%88%86%E8%AF%8D%E5%99%A8%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.</span> <span class="toc-text">IK分词器安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IK%E5%88%86%E8%AF%8D%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.1.</span> <span class="toc-text">IK分词器介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IK%E5%88%86%E8%AF%8D%E5%99%A8%E4%B8%8B%E8%BD%BD"><span class="toc-number">3.2.2.</span> <span class="toc-text">IK分词器下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">3.2.3.</span> <span class="toc-text">下载方式一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">3.2.4.</span> <span class="toc-text">下载方式二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%96%B9%E5%BC%8F%E4%B8%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">下载方式三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E8%AF%8D%E6%B5%8B%E8%AF%95"><span class="toc-number">3.2.6.</span> <span class="toc-text">分词测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IK%E6%89%A9%E5%B1%95%E8%AF%8D%E8%AF%8D%E5%85%B8"><span class="toc-number">3.2.7.</span> <span class="toc-text">IK扩展词词典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%9C%E7%94%A8%E8%AF%8D%E8%AF%8D%E5%85%B8"><span class="toc-number">3.2.8.</span> <span class="toc-text">停用词词典</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2es%E9%9B%86%E7%BE%A4"><span class="toc-number">4.</span> <span class="toc-text">部署es集群</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA-Minio-%E5%AE%B9%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">搭建 Minio 容器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDMinio%E9%95%9C%E5%83%8F"><span class="toc-number">5.0.1.</span> <span class="toc-text">下载Minio镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-number">5.0.2.</span> <span class="toc-text">创建目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAMinio%E5%AE%B9%E5%99%A8%E5%B9%B6%E8%BF%90%E8%A1%8C"><span class="toc-number">5.0.3.</span> <span class="toc-text">创建Minio容器并运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">5.0.4.</span> <span class="toc-text">访问操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-%E5%AE%89%E8%A3%85Mysql"><span class="toc-number">6.</span> <span class="toc-text">Docker 安装Mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AF%BB%E6%89%BEMysql%E9%95%9C%E5%83%8F"><span class="toc-number">6.1.</span> <span class="toc-text">1、寻找Mysql镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%B8%8B%E8%BD%BDMysql%E9%95%9C%E5%83%8F"><span class="toc-number">6.2.</span> <span class="toc-text">2、下载Mysql镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="toc-number">6.3.</span> <span class="toc-text">3、创建目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%88%9B%E5%BB%BAmysql%E5%AE%B9%E5%99%A8%E5%B9%B6%E8%BF%90%E8%A1%8C"><span class="toc-number">6.4.</span> <span class="toc-text">4、创建mysql容器并运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-5"><span class="toc-number">6.4.1.</span> <span class="toc-text">MySQL 5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-8"><span class="toc-number">6.4.2.</span> <span class="toc-text">MySQL 8</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85nacos"><span class="toc-number">7.</span> <span class="toc-text">docker安装nacos</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%B8%8B%E8%BD%BDNacos%E9%95%9C%E5%83%8F"><span class="toc-number">7.0.1.</span> <span class="toc-text">一、下载Nacos镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E6%97%A5%E5%BF%97%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">7.0.2.</span> <span class="toc-text">二、创建日志、配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.0.3.</span> <span class="toc-text">三、创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%85%8D%E7%BD%AEapplication-properties"><span class="toc-number">7.0.4.</span> <span class="toc-text">四、配置application.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81docker%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">7.0.5.</span> <span class="toc-text">五、docker运行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%B5%8F%E8%A7%88%E5%99%A8%E7%99%BB%E5%BD%95"><span class="toc-number">7.0.6.</span> <span class="toc-text">六、浏览器登录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%AE%89%E8%A3%85Nginx"><span class="toc-number">8.</span> <span class="toc-text">docker安装Nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDNginx%E9%95%9C%E5%83%8F"><span class="toc-number">8.1.</span> <span class="toc-text">下载Nginx镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Cnginx%E9%95%9C%E5%83%8F"><span class="toc-number">8.2.</span> <span class="toc-text">运行nginx镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8Enginx%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%98%A0%E5%B0%84%E6%A0%B8%E5%BF%83%E6%96%87%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">从nginx容器中映射核心文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8nginx%E9%95%9C%E5%83%8F%E9%87%8D%E6%96%B0%E6%96%B0%E5%AE%B9%E5%99%A8"><span class="toc-number">8.4.</span> <span class="toc-text">重新启动nginx镜像重新新容器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E5%AE%89%E8%A3%85Redis"><span class="toc-number">9.</span> <span class="toc-text">Docker安装Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81Docker%E6%90%9C%E7%B4%A2redis%E9%95%9C%E5%83%8F"><span class="toc-number">9.0.1.</span> <span class="toc-text">一、Docker搜索redis镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Docker%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="toc-number">9.0.2.</span> <span class="toc-text">二、Docker拉取镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%AE%80%E5%8D%95%E7%9A%84%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AARedis"><span class="toc-number">9.0.3.</span> <span class="toc-text">三、简单的启动一个Redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9F%A5%E7%9C%8Bdocker%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84redis%E7%89%88%E6%9C%AC"><span class="toc-number">9.0.4.</span> <span class="toc-text">四、查看docker容器中的redis版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81redis-conf%E4%B8%8B%E8%BD%BD"><span class="toc-number">9.0.5.</span> <span class="toc-text">五、redis.conf下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-number">9.0.6.</span> <span class="toc-text">六、配置持久化策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E9%85%8D%E7%BD%AE%E6%98%A0%E5%B0%84%E5%B9%B6%E5%90%AF%E5%8A%A8"><span class="toc-number">9.0.7.</span> <span class="toc-text">七、配置映射并启动</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#docker%E5%88%9B%E5%BB%BAgogs%E5%AE%B9%E5%99%A8"><span class="toc-number">10.</span> <span class="toc-text">docker创建gogs容器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7%EF%BC%9A"><span class="toc-number">10.1.</span> <span class="toc-text">1. 创建新用户：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%BA%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%EF%BC%9A"><span class="toc-number">10.2.</span> <span class="toc-text">2. 为用户授权：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%8E%88%E6%9D%83%E4%B9%8B%E5%90%8E%E5%88%B7%E6%96%B0%E6%9D%83%E9%99%90%EF%BC%9A"><span class="toc-number">10.3.</span> <span class="toc-text">3. 授权之后刷新权限：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%92%A4%E9%94%80%E6%8E%88%E6%9D%83"><span class="toc-number">10.4.</span> <span class="toc-text">4.撤销授权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="toc-number">10.5.</span> <span class="toc-text">5、拉取镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F"><span class="toc-number">10.6.</span> <span class="toc-text">6、运行镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="toc-number">10.7.</span> <span class="toc-text">7、配置环境</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/adanblog/2023/06/30/spring%E9%9D%A2%E8%AF%95/" title="spring面试"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/2.jpg" onerror="this.onerror=null;this.src='/adanblog/img/404.jpg'" alt="spring面试"/></a><div class="content"><a class="title" href="/adanblog/2023/06/30/spring%E9%9D%A2%E8%AF%95/" title="spring面试">spring面试</a><time datetime="2023-06-30T12:41:44.405Z" title="发表于 2023-06-30 20:41:44">2023-06-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/adanblog/2023/06/29/Reids%E5%AE%9E%E6%88%98/" title="redis实战"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/2.jpg" onerror="this.onerror=null;this.src='/adanblog/img/404.jpg'" alt="redis实战"/></a><div class="content"><a class="title" href="/adanblog/2023/06/29/Reids%E5%AE%9E%E6%88%98/" title="redis实战">redis实战</a><time datetime="2023-06-29T05:38:51.647Z" title="发表于 2023-06-29 13:38:51">2023-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/adanblog/2023/06/28/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2%E6%A8%A1%E5%9D%97/" title="全文检索模块"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/6.jpg" onerror="this.onerror=null;this.src='/adanblog/img/404.jpg'" alt="全文检索模块"/></a><div class="content"><a class="title" href="/adanblog/2023/06/28/%E5%85%A8%E6%96%87%E6%A3%80%E7%B4%A2%E6%A8%A1%E5%9D%97/" title="全文检索模块">全文检索模块</a><time datetime="2023-06-27T17:09:00.610Z" title="发表于 2023-06-28 01:09:00">2023-06-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/adanblog/2023/06/28/%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/" title="媒资管理模块"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/9.jpg" onerror="this.onerror=null;this.src='/adanblog/img/404.jpg'" alt="媒资管理模块"/></a><div class="content"><a class="title" href="/adanblog/2023/06/28/%E5%AA%92%E8%B5%84%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97/" title="媒资管理模块">媒资管理模块</a><time datetime="2023-06-27T17:09:00.608Z" title="发表于 2023-06-28 01:09:00">2023-06-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/" title="docker操作文档"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/adanblog/img/2.jpg" onerror="this.onerror=null;this.src='/adanblog/img/404.jpg'" alt="docker操作文档"/></a><div class="content"><a class="title" href="/adanblog/2023/06/28/docker%E6%93%8D%E4%BD%9C%E6%96%87%E6%A1%A3/" title="docker操作文档">docker操作文档</a><time datetime="2023-06-27T17:09:00.606Z" title="发表于 2023-06-28 01:09:00">2023-06-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 By ADAN</div><div class="footer_custom_text">听天，不会由命</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/adanblog/js/utils.js"></script><script src="/adanblog/js/main.js"></script><script src="/adanblog/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/adanblog/js/search/local-search.js"></script></div></div></body></html>